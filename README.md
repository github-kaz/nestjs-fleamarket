## 概要

本アプリケーションは、フリマサービスを想定したAPIサーバーです。
NestJSを用いたWebバックエンド設計の学習に加え、
実務を想定した「認証・認可」「トランザクション管理」
「並行処理への配慮」を意識して実装しています。

## 技術選定

- NestJS  
  Controller / Service / Module の責務が明確で、
  中〜大規模開発を想定した構成を取りやすいため採用。

- Prisma  
  型安全にDBアクセスが可能で、
  トランザクションやリレーション管理を明示的に扱えるため採用。

- RDB（PostgreSQL想定）  
  フリマサービスにおいては、
  データ整合性とトランザクション管理が重要なためRDBを採用。

## アーキテクチャ設計

- Controller  
  リクエストの受付、入力値検証、認証情報の取得のみを担当。
  業務ロジックは持たせない。

- Service  
  ユースケース単位の業務ロジックを担当。
  権限チェックや業務ルール判定はService層で行う。

- ORM（Prisma）  
  永続化処理に専念させ、
  業務判断はService層で行うよう責務を分離。

## 実務を想定して工夫した点

- トランザクション管理  
  注文作成時は、複数テーブル更新を1トランザクションで処理し、
  データ不整合が起きないように実装。

- 認証・認可  
  JWT + Guard を用い、ログインユーザー前提のAPI設計とした。

- DTO + Validation  
  入力チェックはController層で行い、
  Service層に不正データを持ち込まない設計とした。

## 簡略化している点・今後の課題

- 決済処理は実装していません  
  本アプリでは決済連携は目的外とし、
  業務ロジック設計に注力しています。

- 権限ロールは最小限  
  管理者ロール等は拡張可能な設計としています。

- テストは一部のみ  
  全網羅ではなく、設計確認を目的とした最小限のテストとしています。

- 並行更新対策  
  本アプリでは、並行処理を考慮した設計を意識しており、
  今後は楽観ロック等の仕組みを追加できる構成としています。
